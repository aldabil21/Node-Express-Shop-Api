(this.webpackJsonpmyshop=this.webpackJsonpmyshop||[]).push([[33],{437:function(e,a,t){"use strict";var r=t(0),n=t.n(r),c=t(404),l=t(77),o=t(90),i=t(286),s=t(436),m=t.n(s);a.a=function(e){var a=e.Icon,t=e.text,r=e.color,s=e.onTryAgain,u=Object(i.a)().t;return n.a.createElement(c.a,{padding:5,className:"center"},n.a.createElement(a,{color:r||"primary",style:{fontSize:200,opacity:.1}}),n.a.createElement(l.a,{variant:"body2"},t),s&&n.a.createElement(c.a,{className:"m"},n.a.createElement(o.a,{onClick:s,color:"primary",variant:"outlined",endIcon:n.a.createElement(m.a,null)},u("common:tryagain"))))}},535:function(e,a,t){"use strict";var r,n=t(95),c=t(4),l=t.n(c),o=t(9),i=t(21),s=t(0),m=t.n(s),u=t(26),d=t(38),p=t(286),E=t(134);a.a=function(e){var a=e.initialValue,t=e.name,c=e.getResult,v=e.touched,b=e.serverError,y=Object(s.useState)([]),g=Object(i.a)(y,2),f=g[0],h=g[1],j=Object(u.c)(),x=Object(u.d)((function(e){return e.orders})),O=Object(p.a)().t,_=Object(s.useCallback)(Object(o.a)(l.a.mark((function e(){var a,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(Object(d.R)());case 3:a=e.sent,t=[],a.length&&(t=a.map((function(e){return{value:e.order_status_id,text:e.text,code:e.code}}))),h(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),j(Object(d.B)("warning",O("orders:fetch_status_err")));case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[j,O]);Object(s.useEffect)((function(){return r=setTimeout((function(){_()}),0),function(){return clearTimeout(r)}}),[_]);return m.a.createElement(E.a,{options:[{value:" ",text:O("common:all")}].concat(Object(n.a)(f)),name:t,label:O("common:status"),initialValue:a||" ",getResult:function(e,a,t){return c(e,a,t,function(e){var a=f.find((function(a){return a.value===e}));return a?a.code:"unknown"}(e))},loading:x.itemLoading,required:!0,setTouched:v,serverError:b})}},727:function(e,a,t){"use strict";t.r(a);var r,n=t(2),c=t(4),l=t.n(c),o=t(9),i=t(21),s=t(0),m=t.n(s),u=t(26),d=t(38),p=t(286),E=t(77),v=t(128),b=t(280),y=t(404),g=t(188),f=t(425),h=t(72),j=t(247),x=t(411),O=t(24),_=t(437),N=t(488),k=t.n(N),w=t(670),M=t(530),T=t(529),R=t(525),S=t(522),I=t(524),z=t(414),A=function(e){var a=e.products,t=e.totals,r=e.currency,n=e.toPrint,c=Object(p.a)().t;return m.a.createElement(w.a,{component:v.a,className:"my-1"},!n&&m.a.createElement(E.a,{align:"center",className:"py",variant:"h4"},c("orders:order_products")),m.a.createElement(M.a,{size:"small"},m.a.createElement(T.a,null,m.a.createElement(R.a,null,m.a.createElement(S.a,null,m.a.createElement(E.a,{className:"bold",variant:"body2"},c("orders:product"))),m.a.createElement(S.a,{align:"right"},m.a.createElement(E.a,{className:"bold",variant:"body2"},c("orders:price"))),m.a.createElement(S.a,{align:"right"},m.a.createElement(E.a,{className:"bold",variant:"body2"},c("orders:quantity"))),m.a.createElement(S.a,{align:"right"},m.a.createElement(E.a,{className:"bold",variant:"body2"},c("orders:total"))))),m.a.createElement(I.a,null,a.map((function(e){return m.a.createElement(R.a,{key:e.order_product_id},m.a.createElement(S.a,null,m.a.createElement(y.a,{className:"flex align-items-center flex-justify-between"},m.a.createElement(E.a,{variant:"body2"},e.title),e.option&&m.a.createElement(z.a,{title:e.option,label:e.option,size:"small",className:"mx",color:"primary"}))),m.a.createElement(S.a,{align:"right"},("specialprice"===e.price_code||"wholesaleprice"===e.price_code)&&m.a.createElement(z.a,{title:c("orders:".concat(e.price_code)),label:c("orders:".concat(e.price_code)),size:"small",className:"mx",color:"secondary",classes:{label:"text-smaller"}}),m.a.createElement(E.a,{variant:"body2",component:"span"},e.price+" "+r)),m.a.createElement(S.a,{align:"right"},m.a.createElement(E.a,{variant:"body2",component:"span"},e.quantity)),m.a.createElement(S.a,{align:"right"},m.a.createElement(E.a,{variant:"body2",component:"span"},e.total+" "+r)))})),t.map((function(e,a){return m.a.createElement(R.a,{key:a},0===a&&m.a.createElement(S.a,{colSpan:2,rowSpan:t.length}),m.a.createElement(S.a,null,m.a.createElement(E.a,{variant:"body2"},e.text)),m.a.createElement(S.a,{align:"right"},m.a.createElement(E.a,{variant:"body2"},e.value+" "+r)))})))))},C=t(692),L=t(43),V=t(696),q=t.n(V),B=function(e){var a=e.lat,t=e.lng,r=e.height,n=void 0===r?200:r;return m.a.createElement("div",{style:{height:n,width:"100%"},className:"py flex ".concat("rtl"===O.a.dir(O.a.language)?"flex-justify-end":"flex-justify-start")},m.a.createElement(v.a,{style:{position:"absolute",zIndex:9,margin:4}},m.a.createElement("a",{href:"https://www.google.com/maps/dir/?api=1&destination=".concat(a,",").concat(t),target:"_blank",rel:"noopener noreferrer"},m.a.createElement(q.a,{fontSize:"large",color:"error",style:{display:"flex"}}))),m.a.createElement(C.a,{bootstrapURLKeys:{key:L.a.settings.google_api},defaultCenter:{lat:a,lng:t},defaultZoom:13,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){return function(e,a,t,r){var n=new a.LatLng(t,r);new a.Marker({position:n,map:e})}(e.map,e.maps,a,t)}}))},D=t(48),F=t(39),P=t(90),G=t(109),J=t(535),U=t(445),K=t.n(U),Q=t(131),W={status_id:{value:" ",validity:!1},comment:{value:"",validity:!0},tracking:{value:"",validity:!1},company:{value:"",validity:!1},status_code:{value:"",validity:!0}},Z=function(e){var a=e.history,t=e.onAdd,r=e.loading,c=Object(s.useState)(W),g=Object(i.a)(c,2),f=g[0],h=g[1],_=Object(s.useState)(!1),N=Object(i.a)(_,2),k=N[0],z=N[1],A=Object(s.useState)(!1),C=Object(i.a)(A,2),L=C[0],V=C[1],q=Object(p.a)().t,B=Object(F.a)(),U=Object(u.c)(),Z=function(e,a,t,r){h((function(c){var l;return"status_id"===t?Object(n.a)(Object(n.a)({},c),{},(l={},Object(D.a)(l,t,{value:e,validity:!!e}),Object(D.a)(l,"status_code",{value:r,validity:!0}),Object(D.a)(l,"tracking",Object(n.a)(Object(n.a)({},c.tracking),{},{validity:"shipped"!==r})),Object(D.a)(l,"company",Object(n.a)(Object(n.a)({},c.company),{},{validity:"shipped"!==r})),l)):Object(n.a)(Object(n.a)({},c),{},Object(D.a)({},t,{value:e,validity:a}))}))},H=function(){var e=Object(o.a)(l.a.mark((function e(){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},e.t0=l.a.keys(f);case 2:if((e.t1=e.t0()).done){e.next=10;break}if(r=e.t1.value,a=Object(n.a)(Object(n.a)({},a),{},Object(D.a)({},r,f[r].value)),f[r].validity){e.next=8;break}return z(!0),e.abrupt("return",U(Object(d.B)("error",q("common:complete_red_input"))));case 8:e.next=2;break;case 10:return e.prev=10,e.next=13,t(a);case 13:h(W),V(!0),z(!1),e.next=20;break;case 18:e.prev=18,e.t2=e.catch(10);case 20:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){L&&V(!1)}),[L]),m.a.createElement(w.a,{component:v.a,className:"py"},m.a.createElement(E.a,{align:"center",className:"py",variant:"h4"},q("orders:order_history")),m.a.createElement(M.a,{size:"small"},m.a.createElement(T.a,null,m.a.createElement(R.a,null,m.a.createElement(S.a,null,m.a.createElement(E.a,{className:"bold",variant:"body2"},q("common:status"))),m.a.createElement(S.a,null,m.a.createElement(E.a,{className:"bold",variant:"body2"},q("orders:comment"))),m.a.createElement(S.a,null,m.a.createElement(E.a,{className:"bold",variant:"body2"},q("orders:date"))))),m.a.createElement(I.a,null,a.map((function(e,a){return m.a.createElement(R.a,{key:a,className:a%2>0?B.css.primary_light:""},m.a.createElement(S.a,null,m.a.createElement(E.a,{variant:"body2"},e.status)),m.a.createElement(S.a,null,m.a.createElement(E.a,{variant:"body2"},e.comment)),m.a.createElement(S.a,null,m.a.createElement(E.a,{variant:"body2"},Object(j.default)(new Date(e.date_added),"yyyy MMMM dd - hh:mm:ss aaaa",{locale:"ar"===O.a.language?x.a:""}))))})))),!L&&m.a.createElement(b.a,{container:!0,className:"p-1"},m.a.createElement(b.a,{item:!0,xs:12},m.a.createElement(E.a,{align:"center",className:"py",variant:"h4"},q("orders:add_history"))),m.a.createElement(b.a,{item:!0,className:"xp",md:3,sm:6,xs:6},m.a.createElement(J.a,{name:"status_id",initialValue:f.status_id.value,getResult:Z,touched:k,serverError:k&&!f.status_id.validity&&q("orders:choose_status_id")})),m.a.createElement(b.a,{item:!0,className:"xp",md:"shipped"===f.status_code.value?3:9,sm:6,xs:6},m.a.createElement(G.a,{label:q("orders:comment"),name:"comment",initialValue:f.comment.value,getResult:Z})),"shipped"===f.status_code.value&&m.a.createElement(m.a.Fragment,null,m.a.createElement(b.a,{item:!0,className:"xp",md:3,sm:6,xs:6},m.a.createElement(G.a,{label:q("orders:tracking"),name:"tracking",initialValue:f.tracking.value,getResult:Z,required:!0,min:8,setTouched:k})),m.a.createElement(b.a,{item:!0,className:"xp",md:3,sm:6,xs:6},m.a.createElement(G.a,{label:q("orders:company"),name:"company",initialValue:f.company.value,getResult:Z,required:!0,min:2,setTouched:k})))),m.a.createElement(y.a,{className:"center"},m.a.createElement(P.a,{color:"primary",variant:"outlined",onClick:H,startIcon:m.a.createElement(K.a,null),endIcon:r?m.a.createElement(Q.a,null):null},q("orders:add_his"))))},H=t(698),X=t.n(H),Y=t(697),$=function(e){var a=e.reff,t=e.order,r=Object(p.a)().t,n=Object(u.d)((function(e){return e.auth}));return m.a.createElement("div",{ref:a,className:"p-2",style:{direction:O.a.dir(O.a.language)}},m.a.createElement(E.a,{variant:"h4",className:"py"},n.settings.siteName),m.a.createElement(E.a,{variant:"h4",align:"center",className:"py"},r("orders:invoice")),m.a.createElement(E.a,{variant:"caption",component:"div",align:"right"},"".concat(r("orders:invoice_no"),": ").concat(t.invoice_no)),m.a.createElement(E.a,{variant:"caption",component:"div",align:"right"},"".concat(r("orders:date"),": ").concat(Object(j.default)(new Date(t.date_added),"yyyy MMMM dd - hh:mm:ss aaaa",{locale:"ar"===O.a.language?x.a:""}))),m.a.createElement(b.a,{container:!0,spacing:1,className:"py-1"},m.a.createElement(b.a,{item:!0,xs:6},m.a.createElement(v.a,{elevation:0,className:"p border-lighter"},m.a.createElement(E.a,{component:"div",className:"xp"},r("orders:user"),": ",t.user,m.a.createElement(f.a,{light:!0})),m.a.createElement(E.a,{component:"div",className:"flex xp"},r("common:mobile"),":"," ",m.a.createElement("span",{className:"ltr px"},t.mobile)),m.a.createElement(f.a,{light:!0}),m.a.createElement(E.a,{component:"div",className:"xp"},r("orders:payment_method"),": ",t.payment_method,m.a.createElement(f.a,{light:!0})))),m.a.createElement(b.a,{item:!0,xs:6},m.a.createElement(v.a,{elevation:0,className:"p border-lighter"},m.a.createElement(E.a,{component:"div",className:"xp"},r("orders:receiver_name"),": ",t.receiver.name,m.a.createElement(f.a,{light:!0})),m.a.createElement(E.a,{component:"div",className:"flex xp"},r("orders:receiver_mobile"),":"," ",m.a.createElement("span",{className:"ltr px"},t.receiver.mobile)),m.a.createElement(f.a,{light:!0}),m.a.createElement(E.a,{component:"div",className:"xp"},r("orders:receiver_address"),":"," ","".concat(t.receiver.country," - ").concat(t.receiver.city," - ").concat(t.receiver.line1),m.a.createElement(f.a,{light:!0}))))),m.a.createElement(A,{products:t.products,totals:t.totals,currency:t.currency,toPrint:!0}))};a.default=function(e){var a=e.match.params.id,t=Object(s.useState)(null),c=Object(i.a)(t,2),N=c[0],w=c[1],M=Object(s.useState)(!1),T=Object(i.a)(M,2),R=T[0],S=T[1],I=Object(u.c)(),z=Object(u.d)((function(e){return e.orders})),C=Object(p.a)().t,L=Object(s.useRef)(),V=Object(s.useCallback)(Object(o.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!1),e.prev=1,e.next=4,I(Object(d.Q)(a));case 4:t=e.sent,w(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),r=e.t0.message||C("orders:order_not_found",{id:a}),I(Object(d.B)("error",r));case 12:return e.prev=12,S(!0),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])}))),[a,I,C]);Object(s.useEffect)((function(){return r=setTimeout((function(){a&&V()}),0),function(){return clearTimeout(r)}}),[a,V]);var q=function(){var e=Object(o.a)(l.a.mark((function e(a){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(Object(d.i)(N.order_id,a));case 3:t=e.sent,w((function(e){return Object(n.a)(Object(n.a)({},e),{},{history:e.history.concat(t),tracking:a.tracking||e.tracking,tracking_company:a.company||e.tracking_company})})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r=e.t0.message||C("orders:fail_add_history"),I(Object(d.B)("error",r));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),D=Object(Y.useReactToPrint)({content:function(){return L.current}});return m.a.createElement(s.Fragment,null,m.a.createElement(E.a,{align:"center",variant:"h4",className:"py-1"},C("orders:order_detail")),R?z.errors?m.a.createElement(_.a,{text:z.errors.message||C("common:uncommon_err"),Icon:k.a,onTryAgain:V}):m.a.createElement(s.Fragment,null,m.a.createElement(b.a,{container:!0,spacing:1},m.a.createElement(b.a,{item:!0,md:6,sm:12,xs:12},m.a.createElement(v.a,{className:"p"},m.a.createElement(y.a,{className:"flex align-items-center flex-justify-between"},m.a.createElement(E.a,{variant:"h4",className:"py"},C("orders:order_info")),m.a.createElement(g.a,{onClick:D},m.a.createElement(X.a,{color:"primary"}))),m.a.createElement(f.a,{variant:"middle"}),m.a.createElement(y.a,{height:10}),m.a.createElement(E.a,{variant:"body2",className:"xp"},m.a.createElement("b",null,C("orders:invoice_no")),": ",N.invoice_no),m.a.createElement(E.a,{variant:"body2",className:"xp"},m.a.createElement("b",null,C("orders:user")),": ",N.user),m.a.createElement(E.a,{className:"flex xp",variant:"body2"},m.a.createElement("b",null,C("common:mobile")),":",m.a.createElement("span",{className:"ltr px"},N.mobile)),m.a.createElement(E.a,{variant:"body2",className:"xp"},m.a.createElement("b",null,C("orders:payment_method")),": ",N.payment_method),m.a.createElement(E.a,{variant:"body2"},m.a.createElement("b",null,C("orders:order_date")),":"," ",Object(j.default)(new Date(N.date_added),"yyyy MMMM dd - hh:mm:ss aaaa",{locale:"ar"===O.a.language?x.a:""})),m.a.createElement(E.a,{variant:"body2",className:"xp"},m.a.createElement("b",null,C("common:status")),": ",N.status),m.a.createElement(E.a,{variant:"body2",className:"xp"},m.a.createElement("b",null,C("orders:tracking")),": ",N.tracking),m.a.createElement(E.a,{variant:"body2",className:"xp"},m.a.createElement("b",null,C("orders:tracking_company")),":"," ",N.tracking_company),m.a.createElement(E.a,{variant:"body2"},m.a.createElement("b",null,C("orders:earned_points")),": ",N.points),m.a.createElement(y.a,{height:27}))),m.a.createElement(b.a,{item:!0,md:6,sm:12,xs:12},m.a.createElement(v.a,{className:"p"},m.a.createElement(E.a,{variant:"h4",className:"py"},C("orders:receiver_info")),m.a.createElement(f.a,{variant:"middle"}),m.a.createElement(y.a,{height:10}),m.a.createElement(E.a,{variant:"body2"},m.a.createElement("b",null,C("orders:receiver_name")),": ",N.receiver.name),m.a.createElement(E.a,{className:"flex",variant:"body2"},m.a.createElement("b",null,C("orders:receiver_mobile")),":",m.a.createElement("span",{className:"ltr px"},N.receiver.mobile)),m.a.createElement(E.a,{variant:"body2"},m.a.createElement("b",null,C("orders:receiver_address")),":"," ","".concat(N.receiver.country," - ").concat(N.receiver.city," - ").concat(N.receiver.line1)),m.a.createElement(B,{lat:N.receiver.lat,lng:N.receiver.lng})))),m.a.createElement(A,{products:N.products,totals:N.totals,currency:N.currency}),m.a.createElement(Z,{history:N.history,onAdd:q,loading:z.itemLoading}),m.a.createElement("div",{className:"printOnly"},m.a.createElement($,{reff:L,order:N}))):m.a.createElement(v.a,null,m.a.createElement(h.a,{col:2,row:2}),m.a.createElement(h.a,{row:2})))}}}]);
//# sourceMappingURL=33.aa17aebc.chunk.js.map