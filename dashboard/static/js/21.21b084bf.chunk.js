(this.webpackJsonpmyshop=this.webpackJsonpmyshop||[]).push([[21],{433:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a(198),n=a(0),c=a.n(n),i=a(8),o=a(484),l=a(496),s=a(24),u=Object(i.a)((function(e){return{root:{width:55,height:26,padding:0,margin:e.spacing(1)},switchBase:{padding:1,"&$checked":{transform:"translateX(29px)",color:e.palette.common.white,"& + $track":{backgroundColor:e.palette.primary.main,opacity:1,border:"none","&:after":{content:'"'.concat(s.a.t("common:on"),'"'),display:"flex",fontSize:"0.8rem",padding:"4px 6px",color:e.palette.primary.contrastText},"&:before":{display:"none"}}},"& + $track":{backgroundColor:e.palette.secondary.light,opacity:1,border:"none","&:after":{display:"none"},"&:before":{content:'"'.concat(s.a.t("common:off"),'"'),display:"flex",justifyContent:"flex-end",fontSize:"0.8rem",padding:"4px 6px",color:e.palette.secondary.contrastText}},"&$focusVisible $thumb":{color:e.palette.primary.main,border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[50],opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,a=Object(r.a)(e,["classes"]);return c.a.createElement(l.a,Object.assign({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked},disabled:a.disabled},a))}));function d(e){var t=e.label,a=e.name,r=e.state,n=e.onChange,i=e.required,l=e.loading;return c.a.createElement(o.a,{control:c.a.createElement(u,{checked:r>0,onChange:function(e){var t=e.target.checked;return n(t?1:0,!i||!!t,a)},name:a,disabled:l}),label:t})}},434:function(e,t,a){"use strict";var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),c=(0,r(a(22)).default)(n.default.createElement("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"EditRounded");t.default=c},435:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(24);var r=function(e,t){var a=e&&e instanceof Array?e:Array(e||""),r=a.length&&a.find((function(e){return e.param===t}));return!!r&&r.msg}},445:function(e,t,a){"use strict";var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),c=(0,r(a(22)).default)(n.default.createElement("path",{d:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"}),"AddRounded");t.default=c},479:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a(198),n=a(0),c=a.n(n),i=a(61),o=a(728),l=a(707),s=a(77),u=a(404);function d(e){var t=e.children,a=e.value,n=e.index,i=Object(r.a)(e,["children","value","index"]);return c.a.createElement(s.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},i),a===n&&c.a.createElement(u.a,{p:3},t))}var m=Object(i.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center"},tabs:{borderBottom:"1px solid ".concat(e.palette.divider)},tab:{minWidth:"auto"}}}));function p(e){var t=e.tabs,a=(e.variant,e.value),r=e.setTab,n=e.title,i=m();return c.a.createElement("div",{className:i.root},n&&n,c.a.createElement(o.a,{value:a,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",className:i.tabs},t.map((function(e,t){return c.a.createElement(l.a,Object.assign({key:t,label:e.label,value:e.id},{id:"scrollable-auto-tab-".concat(a=t),"aria-controls":"scrollable-auto-tabpanel-".concat(a)},{onClick:function(){return r(e.id)}}));var a}))),t.map((function(e,t){return e.component&&c.a.createElement(d,{key:t,value:a,index:e.id},e.component)})))}},499:function(e,t,a){"use strict";var r=a(95),n=a(21),c=a(0),i=a.n(c),o=a(537),l=a(669),s=a(188),u=a(429),d=a(404),m=a(61),p=a(729),g=a(286),b=a(451),v=a.n(b),f=Object(m.a)((function(e){return{container:{border:"1px solid #ccc",borderRadius:3,padding:5},dropzone:{border:"2px dashed #ccc",borderRadius:3,outline:"none",cursor:"pointer","&:focus":{border:"2px dashed",borderColor:e.palette.primary.main}},active:{border:"2px dashed",borderColor:e.palette.primary.main},disabled:{cursor:"not-allowed",background:"#dedede",color:"#b5b5b5"},thumb:{display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:100,height:100,padding:4,boxSizing:"border-box"},thumbInner:{display:"flex",justifyContent:"center",minWidth:0,overflow:"hidden"},img:{display:"block",width:"auto",height:"100%"},primaryBG:{background:e.palette.primary.main,"&:hover":{background:e.palette.primary.light}}}}));t.a=function(e){var t=e.title,a=e.getResult,m=e.required,b=e.touched,y=e.initialImgs,h=e.multiple,E=e.disabled,j=e.maxSize,_=f(),O=Object(c.useState)(y),x=Object(n.a)(O,2),k=x[0],w=x[1],R=Object(c.useState)(null),N=Object(n.a)(R,2),C=N[0],S=N[1],z=Object(g.a)().t,B=Object(o.a)({accept:"image/*",multiple:h,maxSize:j||12e4,onDropRejected:function(e,t){return S(z("common:image_err"))},onDrop:function(e){S(null),w((function(t){return[].concat(Object(r.a)(t),Object(r.a)(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e),id:Math.random()})}))))}))},disabled:E}),V=B.getRootProps,A=B.getInputProps,I=B.isDragActive,L=k.map((function(e){return i.a.createElement(l.a,{key:e.name,badgeContent:i.a.createElement(s.a,{size:"small",className:_.primaryBG,onClick:function(){return function(e){w((function(t){return t.filter((function(t){return t.id!==e.id}))})),URL.revokeObjectURL(e.preview)}(e)}},i.a.createElement(v.a,{fontSize:"small",className:"text-light"})),anchorOrigin:{horizontal:"left",vertical:"top"}},i.a.createElement("div",{className:_.thumb},i.a.createElement("div",{className:_.thumbInner},i.a.createElement("img",{src:e.preview,alt:e.name,className:_.img}))))}));return Object(c.useEffect)((function(){return a(k,!m||!!k.length,"image"),function(){k.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[k]),Object(c.useEffect)((function(){m&&b&&!k.length&&S(z("common:image_err_empty"))}),[b,m]),i.a.createElement("section",{className:_.container},i.a.createElement(u.a,{in:!!C},i.a.createElement(p.a,{severity:"error",className:"my",action:i.a.createElement(s.a,{size:"small",onClick:function(){return S(null)}},i.a.createElement(v.a,{fontSize:"small"}))},C)),i.a.createElement(d.a,{className:"flex flex-start flex-wrap"},L),!E&&i.a.createElement("div",V({className:"".concat(_.dropzone," ").concat(I?_.active:""," py-1 ").concat(E?_.disabled:"")}),i.a.createElement("input",A()),i.a.createElement("p",{className:"center"},t)))}},730:function(e,t,a){"use strict";a.r(t);var r,n=a(43),c=a(47),i=a(2),o=a(4),l=a.n(o),s=a(9),u=a(21),d=a(0),m=a.n(d),p=a(26),g=a(286),b=a(65),v=a(38),f=a(77),y=a(128),h=a(280),E=a(404),j=a(90),_=a(72),O=a(109),x=a(479),k=a(435),w=function(e){var t=e.getResult,a=e.descriptions,r=e.touched,n=e.categories,c=b.a.settings.languages,i=Object(d.useState)(c[0].code),o=Object(u.a)(i,2),l=o[0],s=o[1],p=Object(g.a)().t,v=c.map((function(e,t){return{id:e.code,label:e.language}}));return m.a.createElement(d.Fragment,null,m.a.createElement(x.a,{tabs:v,value:l,variant:"standard",setTab:s,title:m.a.createElement(f.a,{align:"left",variant:"h6",className:"p"},p("categories:category_info"))}),a.map((function(e,a){return m.a.createElement(E.a,{key:e.language,className:"p-1",hidden:l!==e.language},m.a.createElement(f.a,{component:"div",className:"center p",variant:"caption",color:"textSecondary"},p("common:required_star")),m.a.createElement(h.a,{container:!0,spacing:1},m.a.createElement(h.a,{item:!0,xs:12},m.a.createElement(O.a,{label:p("categories:category_name")+" **",initialValue:e.title.value,name:"title",getResult:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t.apply(void 0,r.concat([e.language]))},required:!0,min:2,setTouched:r,serverError:Object(k.a)(n.errors&&n.errors.data,"description[".concat(a,"].title"))})),m.a.createElement(h.a,{item:!0,xs:12},m.a.createElement(O.a,{label:p("categories:category_description"),initialValue:e.description.value,name:"description",getResult:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t.apply(void 0,r.concat([e.language]))},multiline:!0,rows:4,serverError:Object(k.a)(n.errors&&n.errors.data,"description[".concat(a,"].description"))})),m.a.createElement(h.a,{item:!0,xs:12},m.a.createElement(O.a,{label:p("categories:meta_title"),initialValue:e.meta_title.value,name:"meta_title",getResult:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t.apply(void 0,r.concat([e.language]))},serverError:Object(k.a)(n.errors&&n.errors.data,"description[".concat(a,"].meta_title"))})),m.a.createElement(h.a,{item:!0,xs:12},m.a.createElement(O.a,{label:p("categories:meta_description"),initialValue:e.meta_description.value,name:"meta_description",getResult:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t.apply(void 0,r.concat([e.language]))},multiline:!0,rows:4})),m.a.createElement(h.a,{item:!0,xs:12},m.a.createElement(O.a,{label:p("categories:meta_keywords"),initialValue:e.meta_keywords.value,name:"meta_keywords",getResult:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t.apply(void 0,r.concat([e.language]))}}))))})))},R=a(433),N=a(95),C=a(134),S=a(499),z=function(e){var t=e.image,a=e.parent_id,r=e.sort_order,c=e.touched,i=e.getResult,o=e.categories,b=e.editId,y=Object(g.a)().t,E=Object(d.useState)([]),j=Object(u.a)(E,2),_=j[0],x=j[1],w=Object(p.c)(),R=Object(d.useCallback)(Object(s.a)(l.a.mark((function e(){var t,a,r,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(Object(v.T)());case 2:t=e.sent,a=[],r=Object(n.a)(t);try{for(r.s();!(c=r.n()).done;)(i=c.value).category_id!==+b&&a.push({value:i.category_id+"",text:i.title})}catch(o){r.e(o)}finally{r.f()}x(a);case 7:case"end":return e.stop()}}),e)}))),[w,b]);return Object(d.useEffect)((function(){R()}),[R]),m.a.createElement(d.Fragment,null,m.a.createElement(f.a,{component:"div",className:"center p",variant:"caption",color:"textSecondary"},y("common:required_star")),m.a.createElement(h.a,{container:!0,spacing:2},m.a.createElement(h.a,{item:!0,sm:6,xs:12},m.a.createElement(C.a,{options:[{value:"0",text:y("common:main")}].concat(Object(N.a)(_)),name:"parent_id",label:y("categories:parent_category")+" **",getResult:i,initialValue:a,loading:o.itemLoading,serverError:Object(k.a)(o.errors&&o.errors.data,"parent_id")})),m.a.createElement(h.a,{item:!0,sm:6,xs:12},m.a.createElement(O.a,{label:y("categories:sort_order"),initialValue:r,name:"sort_order",getResult:i,required:!0,decimal:!0,mathMin:"-1",setTouched:c})),m.a.createElement(h.a,{item:!0,xs:12},m.a.createElement(S.a,{getResult:i,initialImgs:t,multiple:!1,title:y("categories:thumb_suggestion"),touched:c,disabled:t.length>0}))))},B=a(445),V=a.n(B),A=a(434),I=a.n(A),L=a(131),T=function(){return b.a.settings.languages.map((function(e){return{language:e.code,title:{value:"",validity:!1},description:{value:"",validity:!0},meta_title:{value:"",validity:!0},meta_description:{value:"",validity:!0},meta_keywords:{value:"",validity:!0}}}))},M=function(e){return{description:T().map((function(t){var a=e.description.find((function(e){return e.language===t.language}));return a?{language:t.language,title:{value:a.title,validity:!!a.title},description:{value:a.description,validity:!0},meta_title:{value:a.meta_title,validity:!0},meta_description:{value:a.meta_description,validity:!0},meta_keywords:{value:a.meta_keywords,validity:!0}}:t})),parent_id:{value:e.parent_id+"",validity:!0},status:{value:e.status,validity:!0},image:{value:[{id:"prev_",name:e.image,preview:"".concat(b.a.server,"/").concat(e.image)}],validity:!0},sort_order:{value:e.sort_order+"",validity:!0}}};t.default=function(e){var t=e.history,a=e.match.params.id,o=Object(d.useState)(!!a),O=Object(u.a)(o,2),x=O[0],k=O[1],N=Object(d.useState)({description:T(),parent_id:{value:"0",validity:!0},status:{value:1,validity:!0},image:{value:[],validity:!0},sort_order:{value:"0",validity:!0}}),C=Object(u.a)(N,2),S=C[0],B=C[1],A=Object(d.useState)(!1),q=Object(u.a)(A,2),U=q[0],$=q[1],F=Object(p.d)((function(e){return e.categories})),P=Object(g.a)().t,D=Object(p.c)(),G=Object(d.useCallback)(Object(s.a)(l.a.mark((function e(){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(v.H(a));case 3:r=e.sent,B(M(r)),k(!1),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),n=e.t0.message||P("categories:category_not_found"),D(v.B("error",n)),t.replace("/categories");case 13:case"end":return e.stop()}}),e,null,[[0,8]])}))),[a,D,P,t]);Object(d.useEffect)((function(){return a&&(r=setTimeout((function(){G()}),0)),function(){return clearTimeout(r)}}),[a,G]);var J=function(e,t,a){B((function(r){return Object(i.a)(Object(i.a)({},r),{},Object(c.a)({},a,{value:e,validity:t}))}))},H=function(){var e=Object(s.a)(l.a.mark((function e(){var r,o,s,u,d,m,p,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},e.t0=l.a.keys(S);case 2:if((e.t1=e.t0()).done){e.next=11;break}if("description"===(o=e.t1.value)){e.next=9;break}if(r=Object(i.a)(Object(i.a)({},r),{},Object(c.a)({},o,S[o].value)),S[o].validity){e.next=9;break}return $(!0),e.abrupt("return",D(v.B("error",P("common:complete_red_input"))));case 9:e.next=2;break;case 11:s=[],u=Object(n.a)(S.description),e.prev=13,m=function(){var e=d.value;for(var t in s.push({language:e.language,title:e.title.value,description:e.description.value,meta_title:e.meta_title.value,meta_description:e.meta_description.value,meta_keywords:e.meta_keywords.value}),e)if("language"!==t&&!e[t].validity)return $(!0),{v:D(v.B("error",P("common:complete_red_input_detail",{section:P("categories:category_info"),language:b.a.settings.languages.find((function(t){return t.code===e.language})).language})))}},u.s();case 16:if((d=u.n()).done){e.next=22;break}if("object"!==typeof(p=m())){e.next=20;break}return e.abrupt("return",p.v);case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(13),u.e(e.t2);case 27:return e.prev=27,u.f(),e.finish(27);case 30:return r=Object(i.a)(Object(i.a)({},r),{},{description:JSON.stringify(s)}),e.prev=31,e.next=34,D(v.c(r,a));case 34:t.replace("/categories"),e.next=41;break;case 37:e.prev=37,e.t3=e.catch(31),g=e.t3.message||P("categories:save_err"),D(v.B("error",g));case 41:case"end":return e.stop()}}),e,null,[[13,24,27,30],[31,37]])})));return function(){return e.apply(this,arguments)}}();return m.a.createElement(d.Fragment,null,m.a.createElement(f.a,{align:"center",variant:"h4",className:"py-1"},P(a?"categories:edit_category":"categories:add_category")),x?m.a.createElement(y.a,null,m.a.createElement(_.a,{row:4,col:2})):m.a.createElement(d.Fragment,null,m.a.createElement(h.a,{container:!0,spacing:1},m.a.createElement(h.a,{item:!0,md:6,sm:12,xs:12},m.a.createElement(y.a,{className:"my-1"},m.a.createElement(w,{descriptions:S.description,getResult:function(e,t,a,r){B((function(n){return Object(i.a)(Object(i.a)({},n),{},{description:n.description.map((function(n){return n.language===r?Object(i.a)(Object(i.a)({},n),{},Object(c.a)({},a,{value:e,validity:t})):n}))})}))},touched:U,categories:F}))),m.a.createElement(h.a,{item:!0,md:6,sm:12,xs:12},m.a.createElement(y.a,{className:"my-1 p-1"},m.a.createElement(E.a,{className:"flex flex-justify-between align-items-center"},m.a.createElement(f.a,{align:"center",variant:"h6",className:"p"},P("categories:category_detail")),m.a.createElement(R.a,{state:S.status.value,onChange:J,name:"status"})),m.a.createElement(z,{image:S.image.value,parent_id:S.parent_id.value,sort_order:S.sort_order.value,touched:U,getResult:J,categories:F,editId:a})))),m.a.createElement(E.a,{className:"center py-1"},m.a.createElement(j.a,{variant:"contained",color:"primary",size:"large",onClick:H,endIcon:F.loading&&m.a.createElement(L.a,null),startIcon:a?m.a.createElement(I.a,null):m.a.createElement(V.a,null),disabled:F.loading,style:{width:"80%"}},m.a.createElement(f.a,{variant:"h4",className:"py-1"},P(a?"categories:edit_category":"categories:add_category"))))))}}}]);
//# sourceMappingURL=21.21b084bf.chunk.js.map