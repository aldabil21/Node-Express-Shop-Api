(this.webpackJsonpmyshop=this.webpackJsonpmyshop||[]).push([[29],{433:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a(198),n=a(0),c=a.n(n),i=a(8),l=a(484),o=a(496),s=a(24),u=Object(i.a)((function(e){return{root:{width:55,height:26,padding:0,margin:e.spacing(1)},switchBase:{padding:1,"&$checked":{transform:"translateX(29px)",color:e.palette.common.white,"& + $track":{backgroundColor:e.palette.primary.main,opacity:1,border:"none","&:after":{content:'"'.concat(s.a.t("common:on"),'"'),display:"flex",fontSize:"0.8rem",padding:"4px 6px",color:e.palette.primary.contrastText},"&:before":{display:"none"}}},"& + $track":{backgroundColor:e.palette.secondary.light,opacity:1,border:"none","&:after":{display:"none"},"&:before":{content:'"'.concat(s.a.t("common:off"),'"'),display:"flex",justifyContent:"flex-end",fontSize:"0.8rem",padding:"4px 6px",color:e.palette.secondary.contrastText}},"&$focusVisible $thumb":{color:e.palette.primary.main,border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[50],opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,a=Object(r.a)(e,["classes"]);return c.a.createElement(o.a,Object.assign({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked},disabled:a.disabled},a))}));function d(e){var t=e.label,a=e.name,r=e.state,n=e.onChange,i=e.required,o=e.loading;return c.a.createElement(l.a,{control:c.a.createElement(u,{checked:r>0,onChange:function(e){var t=e.target.checked;return n(t?1:0,!i||!!t,a)},name:a,disabled:o}),label:t})}},434:function(e,t,a){"use strict";var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),c=(0,r(a(22)).default)(n.default.createElement("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"EditRounded");t.default=c},435:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(24);var r=function(e,t){var a=e&&e instanceof Array?e:Array(e||""),r=a.length&&a.find((function(e){return e.param===t}));return!!r&&r.msg}},445:function(e,t,a){"use strict";var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),c=(0,r(a(22)).default)(n.default.createElement("path",{d:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"}),"AddRounded");t.default=c},479:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var r=a(198),n=a(0),c=a.n(n),i=a(61),l=a(728),o=a(707),s=a(77),u=a(404);function d(e){var t=e.children,a=e.value,n=e.index,i=Object(r.a)(e,["children","value","index"]);return c.a.createElement(s.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},i),a===n&&c.a.createElement(u.a,{p:3},t))}var f=Object(i.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center"},tabs:{borderBottom:"1px solid ".concat(e.palette.divider)},tab:{minWidth:"auto"}}}));function m(e){var t=e.tabs,a=(e.variant,e.value),r=e.setTab,n=e.title,i=f();return c.a.createElement("div",{className:i.root},n&&n,c.a.createElement(l.a,{value:a,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",className:i.tabs},t.map((function(e,t){return c.a.createElement(o.a,Object.assign({key:t,label:e.label,value:e.id},{id:"scrollable-auto-tab-".concat(a=t),"aria-controls":"scrollable-auto-tabpanel-".concat(a)},{onClick:function(){return r(e.id)}}));var a}))),t.map((function(e,t){return e.component&&c.a.createElement(d,{key:t,value:a,index:e.id},e.component)})))}},736:function(e,t,a){"use strict";a.r(t);var r,n=a(43),c=a(47),i=a(2),l=a(4),o=a.n(l),s=a(9),u=a(21),d=a(0),f=a.n(d),m=a(26),p=a(286),b=a(65),v=a(38),g=a(77),h=a(128),j=a(280),y=a(404),O=a(90),E=a(72),x=a(95),k=a(109),_=a(479),w=a(435),C=a(134),N=a(433),R=function(e){var t=e.descriptionResult,a=e.descriptions,r=e.touched,c=e.filters,i=e.parent_id,l=e.sort_order,h=e.editId,O=e.status,E=e.getResult,R=b.a.settings.languages,B=Object(d.useState)(R[0].code),S=Object(u.a)(B,2),T=S[0],V=S[1],z=Object(p.a)().t,M=R.map((function(e,t){return{id:e.code,label:e.language}})),$=Object(d.useState)([]),q=Object(u.a)($,2),A=q[0],I=q[1],L=Object(m.c)(),F=Object(d.useCallback)(Object(s.a)(o.a.mark((function e(){var t,a,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(Object(v.U)());case 2:t=e.sent,a=[],r=Object(n.a)(t);try{for(r.s();!(c=r.n()).done;)(i=c.value).filter_id!==+h&&a.push({value:i.filter_id+"",text:i.title})}catch(l){r.e(l)}finally{r.f()}I(a);case 7:case"end":return e.stop()}}),e)}))),[L,h]);return Object(d.useEffect)((function(){F()}),[F]),f.a.createElement(d.Fragment,null,f.a.createElement(_.a,{tabs:M,value:T,variant:"standard",setTab:V,title:f.a.createElement(y.a,{className:"flex flex-justify-between align-items-center"},f.a.createElement(g.a,{align:"left",variant:"h6",className:"p"},z("filters:filter_detail")),f.a.createElement(N.a,{state:O,onChange:E,name:"status"}))}),a.map((function(e,a){return f.a.createElement(y.a,{key:e.language,className:"p-1",hidden:T!==e.language},f.a.createElement(g.a,{component:"div",className:"center p",variant:"caption",color:"textSecondary"},z("common:required_star")),f.a.createElement(j.a,{container:!0,spacing:1},f.a.createElement(j.a,{item:!0,md:4,sm:6,xs:12},f.a.createElement(k.a,{label:z("filters:filter_name")+" **",initialValue:e.title.value,name:"title",getResult:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t.apply(void 0,r.concat([e.language]))},required:!0,min:2,setTouched:r,serverError:Object(w.a)(c.errors&&c.errors.data,"description[".concat(a,"].title"))})),f.a.createElement(j.a,{item:!0,md:4,sm:6,xs:12},f.a.createElement(C.a,{options:[{value:"0",text:z("common:main")}].concat(Object(x.a)(A)),name:"parent_id",label:z("filters:parent_filter")+" **",getResult:E,initialValue:i,loading:c.itemLoading,serverError:Object(w.a)(c.errors&&c.errors.data,"parent_id")})),f.a.createElement(j.a,{item:!0,md:4,sm:6,xs:12},f.a.createElement(k.a,{label:z("filters:sort_order"),initialValue:l,name:"sort_order",getResult:E,required:!0,decimal:!0,mathMin:"-1",setTouched:r}))))})))},B=a(445),S=a.n(B),T=a(434),V=a.n(T),z=a(131),M=function(){return b.a.settings.languages.map((function(e){return{language:e.code,title:{value:"",validity:!1}}}))},$=function(e){return{description:e?M().map((function(t){var a=e.description.find((function(e){return e.language===t.language}));return a?{language:t.language,title:{value:a.title,validity:!!a.title}}:t})):M(),parent_id:{value:e?e.parent_id+"":"0",validity:!0},status:{value:e?e.status:1,validity:!0},sort_order:{value:e?e.sort_order+"":"0",validity:!0}}};t.default=function(e){var t=e.history,a=e.match.params.id,l=Object(d.useState)(!!a),x=Object(u.a)(l,2),k=x[0],_=x[1],w=Object(d.useState)($()),C=Object(u.a)(w,2),N=C[0],B=C[1],T=Object(d.useState)(!1),M=Object(u.a)(T,2),q=M[0],A=M[1],I=Object(m.d)((function(e){return e.filters})),L=Object(p.a)().t,F=Object(m.c)(),J=Object(d.useCallback)(Object(s.a)(o.a.mark((function e(){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(v.L(a));case 3:r=e.sent,B($(r)),_(!1),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),n=e.t0.message||L("filters:filter_not_found"),F(v.B("error",n)),t.replace("/filters");case 13:case"end":return e.stop()}}),e,null,[[0,8]])}))),[a,F,L,t]);Object(d.useEffect)((function(){return a&&(r=setTimeout((function(){J()}),0)),function(){return clearTimeout(r)}}),[a,J]);var P=function(){var e=Object(s.a)(o.a.mark((function e(){var r,l,s,u,d,f,m,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},e.t0=o.a.keys(N);case 2:if((e.t1=e.t0()).done){e.next=11;break}if("description"===(l=e.t1.value)){e.next=9;break}if(r=Object(i.a)(Object(i.a)({},r),{},Object(c.a)({},l,N[l].value)),N[l].validity){e.next=9;break}return A(!0),e.abrupt("return",F(v.B("error",L("common:complete_red_input"))));case 9:e.next=2;break;case 11:s=[],u=Object(n.a)(N.description),e.prev=13,f=function(){var e=d.value;for(var t in s.push({language:e.language,title:e.title.value}),e)if("language"!==t&&!e[t].validity)return A(!0),{v:F(v.B("error",L("common:complete_red_input_detail",{section:L("filters:filter_detail"),language:b.a.settings.languages.find((function(t){return t.code===e.language})).language})))}},u.s();case 16:if((d=u.n()).done){e.next=22;break}if("object"!==typeof(m=f())){e.next=20;break}return e.abrupt("return",m.v);case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(13),u.e(e.t2);case 27:return e.prev=27,u.f(),e.finish(27);case 30:return r=Object(i.a)(Object(i.a)({},r),{},{description:s}),e.prev=31,e.next=34,F(v.e(r,a));case 34:t.replace("/filters"),e.next=41;break;case 37:e.prev=37,e.t3=e.catch(31),p=e.t3.message||L("filters:save_err"),F(v.B("error",p));case 41:case"end":return e.stop()}}),e,null,[[13,24,27,30],[31,37]])})));return function(){return e.apply(this,arguments)}}();return f.a.createElement(d.Fragment,null,f.a.createElement(g.a,{align:"center",variant:"h4",className:"py-1"},L(a?"filters:edit_filter":"filters:add_filter")),k?f.a.createElement(h.a,null,f.a.createElement(E.a,{row:4,col:2})):f.a.createElement(d.Fragment,null,f.a.createElement(j.a,{container:!0,spacing:1},f.a.createElement(j.a,{item:!0,xs:12},f.a.createElement(h.a,{className:"my-1"},f.a.createElement(R,{descriptions:N.description,descriptionResult:function(e,t,a,r){B((function(n){return Object(i.a)(Object(i.a)({},n),{},{description:n.description.map((function(n){return n.language===r?Object(i.a)(Object(i.a)({},n),{},Object(c.a)({},a,{value:e,validity:t})):n}))})}))},touched:q,filters:I,parent_id:N.parent_id.value,sort_order:N.sort_order.value,status:N.status.value,editId:a,getResult:function(e,t,a){B((function(r){return Object(i.a)(Object(i.a)({},r),{},Object(c.a)({},a,{value:e,validity:t}))}))}})))),f.a.createElement(y.a,{className:"center py-1"},f.a.createElement(O.a,{variant:"contained",color:"primary",size:"large",onClick:P,endIcon:I.loading&&f.a.createElement(z.a,null),startIcon:a?f.a.createElement(V.a,null):f.a.createElement(S.a,null),disabled:I.loading,style:{width:"80%"}},f.a.createElement(g.a,{variant:"h4",className:"py-1"},L(a?"filters:edit_filter":"filters:add_filter"))))))}}}]);
//# sourceMappingURL=29.bbc966d1.chunk.js.map